{% extends "layout.html" %}

{% block body %}
    <div id="instruction-container">
        <form action="/logout" method="post">
            <button class="btn btn-primary" id="logout" name="submit" type="submit" value="logout">Log out</button>
        </form>
    </div>
    <div id="multi-trash" data-toggle="modal" data-target="#confirmDelQs">
        <i class="fa fa-trash fa-3x"></i>
    </div>
    <div class="modal fade" id="resetQbank" tabindex="-1" role="dialog" aria-labelledby="resetWhole" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="resetWhole">Reset entire question bank?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                <strong>This action cannot be undone.</strong>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <form action="/" method="post">
                    <input class="del-btn" value="reset" name="reset">
                    <button class="btn btn-danger">Yes, reset</button>
                </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="confirmDelQs" tabindex="-1" role="dialog" aria-labelledby="confirmDelQsTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="confirmDelQsTitle">Delete question(s)?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                <strong>This action cannot be undone.</strong>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button class="btn btn-danger" id="mulTrashing">Yes, delete</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="editQmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Edit Question</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="editQdiv">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <div id="index-bg">
        <div class="quiz-title">
            <!-- SOURCE: https://css-tricks.com/snippets/css/typewriter-effect/ -->
            <h1>
                <a href="" class="typewrite" data-period="2000" data-type='["FBLA Quiz", "5 Questions"]'>
                    <span class="wrap"></span>
                </a>
            </h1>
            <!-- END OF SOURCE -->
        </div>
        <div id="home-choose-next">
            <button type="button" class="btn btn-info info" data-toggle="modal" data-target="#quiz-instructions">User Manual</button> 
            <button type="button" class="btn btn-secondary info" data-toggle="collapse" data-target="#adv-settings" aria-expanded="false" aria-controls="adv-settings">Advanced Settings</button>
            <a class="btn btn-primary start" href="/quiz" role="button">Start</a>
        </div>
        <div id="adv-settings" class="collapse">
            <div id="adv-wrapper">
                <div class="setting-section">
                    <hr>
                    <p class="settings-sub">MODES</p>
                </div>
                <div id="bg-mode" class="modes">
                    <p class="adv-setting-text">Dark mode</p>
                    <!-- SOURCE: https://codepen.io/FlorinPop17/pen/XWWZYYG -->
                    <div class="label">
                        <i class="fa fa-sun-o"></i>
                        <i class="fa fa-moon-o"></i>
                        <div class="ball"></div>
                    </div>
                    <!-- END OF SOURCE -->
                </div>
                <div class="modes">
                    <p class="adv-setting-text">Disable hint</p>
                    <input type="checkbox" class="checkbox" id="chk" />
                    <label class="label" for="chk">
                        <i class="fa fa-lightbulb-o on" aria-hidden="true"></i>
                        <i class="fa fa-lightbulb-o off" aria-hidden="true"></i>
                        <div class="ball"></div>
                    </label>
                </div>
                <div class="setting-section">
                    <hr>
                    <p class="settings-sub">ACCOUNT</p>
                </div>
                <div class="modes">
                    <p class="adv-setting-text">Change username</p>
                    <form action="/" method="post" class="form-inline">
                        <div class="form-group mx-sm-3 mb-2">
                            <label for="new-username" class="sr-only">Username</label>
                            <input type="text" class="form-control" name="new-username" id="new-username" placeholder="New username" autocomplete="off" required>
                        </div>
                        <button class="btn btn-primary" type="submit" value="Submit">Change</button>
                    </form>
                </div>
                <div class="modes">
                    <p class="adv-setting-text">Change password</p>
                    <form action="/" method="post" class="form-inline">
                        <div class="form-group mx-sm-3 mb-2">
                            <label for="new-password" class="sr-only">Password</label>
                            <input type="password" class="form-control" name="password" id="new-password" placeholder="New password" autocomplete="off" required>
                        </div>
                        <button class="btn btn-primary" type="submit" value="Submit">Change</button>
                    </form>
                </div>
                <div class="setting-section">
                    <hr>
                    <p class="settings-sub">QUESTION BANK</p>
                </div>
                <div id="centered-btns">
                    <button class="btn btn-info info" type="button" data-toggle="collapse" data-target="#toggleCollapse2" aria-expanded="false" aria-controls="toggleCollapse2">View Current</button>
                    <button class="btn btn-secondary info" type="button" data-toggle="collapse" data-target="#toggleCollapse1" aria-expanded="false" aria-controls="toggleCollapse1">Add Questions</button>
                    <button class="btn btn-danger info" id="reset" data-toggle="modal" data-target="#resetQbank">Reset Question Bank</button>     
                </div>
                <div id="toggleCollapse1" class="collapse">
                    <form action="/" method="post" class="form-inline">
                        <div class="form-group inline">
                            <select name="question_type" class="form-control dropdown" required>
                                <option disabled selected value="">Question Type</option>
                                <option class="dropdown" value="True and False">True and False</option>
                                <option class="dropdown" value="Fill In The Blank">Fill In The Blank</option>
                                <option class="dropdown" value="Multiple Choice">Multiple Choice</option>
                                <option class="dropdown" value="Dropdown">Dropdown</option>
                            </select>
                        </div>
                        <div class="form-group inline">
                            <input autocomplete="off" autofocus class="form-control" name="question" placeholder="Question" type="text" required>
                        </div>  
                        <div id="dependent"></div>                  
                    </form>
                </div>
                <div id="toggleCollapse2" class="collapse">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                            <th scope="col">Type</th>
                            <th scope="col">Question</th>
                            <th scope="col">Answer</th>
                            <th scope="col">Hint</th>
                            <th scope="col">Option 1</th>
                            <th scope="col">Option 2</th>
                            <th scope="col">Option 3</th>
                            <th scope="col">Option 4</th>
                            <th scope="col"></th>
                            <th scope="col">DEL</th>
                            <th scope="col">SEL</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for q in questions %}
                                <tr id="row{{ q.id }}">
                                    <td>{{ q.question_type }}</td>
                                    <td>{{ q.question }}</td>
                                    <td>{{ q.answer }}</td>
                                    <td>{{ q.hint }}</td>
                                    <td>{{ q.a }}</td>
                                    <td>{{ q.b }}</td>
                                    <td>{{ q.c }}</td>
                                    <td>{{ q.d }}</td>
                                    <td><button type="button" class="btn btn-warning editQ" id="edit{{ q.id }}" data-toggle="modal" data-target="#editQmodal">EDIT</button></td>
                                    <td>
                                        <i class="del-question fa fa-trash fa-2x" data-toggle="modal" data-target="#confirmDelQ">
                                            <button class="del-btn" value={{ q.id }}></button>
                                        </i>
                                    </td>
                                    <td><div class="form-check multi-del"><input class="form-check-input multi-sel-check" type="checkbox" name="sel{{ q.id }}"></div></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script>
        var curTheme = "{{ theme|safe }}";
        var curHint = "{{ hintMode|safe }}";
        // var qBank = "{{ questions|safe }}";
        console.log(curTheme, curHint)
    </script>
    <script src="static/index.js"></script>
    <script src="static/script.js"></script>
{% endblock %}